# vue
## vue是什么
vue是由yyx个人开发的一款渐进式框架 他最大的特点是mvvm和双向数据绑定，其实原理上是一样的 
mvvm 即视图 模型 视图模型三层组成 分离数据逻辑 与 视图逻辑 而他们之间的联系是由vm视图模型决定的，这个视图模型就类似于一种中间层，将数据变动从数据逻辑传入到视图层   
双向数据绑定即为实现vm的方法，旧版本的vue双向数据绑定利用的是Object.defineProperty实现的，劫持了对象的get和set方法，所以对数组数据的下标操作以及pop等操作无法监听到，所以内部实现了两种方法，第一种是劫持了数组的pop shift slice等方法，做了不同的处理，第二种方法是提供了$set这个通道，给用户提供手动触发更新的方法。  
## vue为啥是渐进式框架
如上所说，vue其实只是一个视图引擎，但是在这个视图引擎的基础上发展出了一套完整的生态机构，而你可以任意替换其中的一环，或者增加其中一环  
声明式渲染->组件系统->路由(客户端路由、服务端路由)->状态管理->构建工具
## vue跟jq有啥区别
vue是一个声明式框架 而jq是一个命令式框架 两者的区别简单的来说就是 jq是用户命令电脑去做什么然后做什么 比如$('#id').css('').animate() 而vue是利用声明一个数据结构，让电脑自己实现具体去做什么
## vue和react有什么区别
本质上vue和react都是满足mvvm形式的框架 大部分是相同的 渐进式框架 diff算法 虚拟dom结构，而有些不同的是vue是声明式 而react是声明式与函数式的结合，react是完全的函数式编程，逻辑上更加的清晰，更适用于大型项目更好管理
## Vue实现响应式的原理
### Observer监听器
实现对数据的双向劫持  
实现原理 Object.defineProperty 递归劫持set与get属性  
当调用get时 将当前的Dep.target(实际上就是一个watcher实例)推入一个dep 即依赖  
当调用set时 将触发set函数
### Watcher订阅者
实现compile和observer的联动 watcher在compile的时候被new出来，会手动触发get方法  

### Dep 依赖
data的每一个对象都有一个dep 当对象改变时 触发了被劫持的set函数，调用了dep.notify()方法  
通知Wathcer watcher在通知Compile进行改变 notify方法将会调用update方法  
update方法存在两个判断 lazy(compute)属性使用, sync代表同步更新，vue提供给用户的都是异步更新，即设置一个值三次只会在最后一次触发dom更新，这样减少了不必要的渲染开销，如果是同步更新，则直接run,否则继续加入队列中，队列结束dom更新  
### Compile 编译器

## Watcher和computed有什么区别
从用法上来说Watcher是用于监听一个数据的变化 并对应进行处理，而Computed用于多个数据的变化 并利用变化的数据进行处理
从原理上来说computed实际上分了两个步骤 1. 将computed里用到的依赖收集起来，并实例化成watcher 在依赖变化时提供dep.notify通知watcher去改变视图 2. 直接将get通过Object.defineProperty方法劫持 当调用get时将会直接劫持到get上 set同理  
watch 实际上调用的是Vue.$watch方法，他的初始化实在computed之后的 满足参数 immediate 存在则直接调用一次 deep 是否深度监听 实际上最终调用了new Watcher实例化了一个watcher
## Vue的key
Vue的key是用作diff中是否复用使用的，其实这个东西可以在很多地方看到，比如react的key 比如flutter的key，可能内部实现方式是不同的，其实是殊途同归的都是用作是否重新生成新的节点使用。  
我们在很多地方都可以看到key的使用，比如v-for中的key在vscode编译器中是必须拥有的，否则会报警告，比如你v-if一个v-for循环出来的数据你将会看到其实是将下一个dom的数据改变了，这就是就地复用。  
其实还能在其他地方看到，比如你需要强制刷新一个组件，你可以通过改变他的key来进行强制刷新。  